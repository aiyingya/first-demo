!function(t){"use strict";function e(t){return t.protocol===location.protocol&&t.hostname===location.hostname&&t.port===location.port}function i(t){if(t){var e=window.location.host+"/#/",i=[],o=0;for(var n in t.query)console.log(n),console.log(t.query[n]),i[o]=n+"="+t.query[n],o++;console.log(i.join("&"));var s="http://"+e+t.name+"?"+i.join("&");return t.url?t.url:s}}function o(t,e,i){if(e=e.trim(),e.indexOf(" ")===-1)return void i(t,e);for(var o=e.split(/\s+/),n=0,s=o.length;n<s;n++)i(t,o[n])}function n(e){var i={title:e.title,content:e.content,button1:e.button1,button1action:e.button1action,button2:e.button2,button2action:e.button2action},o="";o+=i.button1action&&"string"!=typeof i.button1action||i.button2action&&"string"!=typeof i.button2action?[' <a href="javascript:;" data-close="1" class="weui-dialog__btn weui-dialog__btn_default">'+i.button1+"</a>",'<a href="javascript:;" data-button2="2" class="weui-dialog__btn weui-dialog__btn_primary">'+i.button2+"</a>"].join(""):'<a href="javascript:;" data-close="1" class="weui-dialog__btn weui-dialog__btn_primary">知道了</a>';var n=t(['<div class="js_dialog">','<div class="weui-mask"></div>','<div class="weui-dialog">','<div class="weui-dialog__hd"><strong class="weui-dialog__title">'+i.title+"</strong></div>",'<div class="weui-dialog__bd">'+i.content+"</div>",'<div class="weui-dialog__ft">',o,"</div>","</div>","</div>"].join("")),s=(i.button1action,i.button2action);a.append(n),s&&"string"!==s&&t("[data-button2]").bind("click",function(){s(),setTimeout(function(){n.remove()})}),t("[data-close]").bind("click",function(){n.remove()})}var s={},r="function"==typeof require?require("./b.prius.js"):window.Prius;if("undefined"!=typeof t||(t=window.Zepto||window.jQuery)){if(!r)throw new Error("[vue-jsbridge] cannot locate Prius.js.");var a=t("body"),u=/\/$/,l=/[-.*+?^${}()|[\]\/\\]/g,c=/\?.*$/;s.config={},s.install=function(s){var d=s.util,p=d.bind,h=d.isObject,v=d.addClass,f=d.removeClass,g=s.directive("on").priority,w="__vue-router-link-update__";s.prototype.checkInsideApp=function(){return r.isInsideApp}(),s.prototype.Prius=function(t){return r}(),s.prototype.openNewPage=function(t){console.log("openNewPage");var e=t.url?t.url:i(t);return r.isInsideApp?void r.openNewPage({title:t.title,linkUrl:e}):void(t.url?window.location.href=t.url:router.go(t))},s.prototype.showLoadingDialog=function(t){return!r.isInsideApp||void r.showLoadingDialog(t)},s.prototype.hideLoadingDialog=function(){return!!r.isInsideApp&&void r.hideLoadingDialog()},s.prototype.showLoadingView=function(t){return!r.isInsideApp||void r.showLoadingView(t)},s.prototype.hideLoadingView=function(){return!!r.isInsideApp&&void r.hideLoadingView()},s.prototype.showToast=function(e){var i={};if("string"==typeof e?i.msg=e:i.msg=e.msg,r.isInsideApp)r.showToast(e);else{var o=t('<span class="fadeInError show-toast">'+i.msg+"</span>");a.append(o),setTimeout(function(){o.remove()},3500)}console.log(a)},s.prototype.showAlert=function(t){var e={title:t.title,content:t.content,button1Name:t.button1,button2Name:t.button2,one2Success:t.one2Success};r.isInsideApp?r.showDialog(e):n(t)},s.prototype.gotoLoginPage=function(t){var e={success:t.success};return!r.isInsideApp||void r.gotoLoginPage(e.success)},s.prototype.addIconMenu=function(t){var e={iconUrl:t.iconUrl,rule:t.rule},i=t.listener;return!r.isInsideApp||void r.addIconMenu(e,i)},s.prototype.addWordMenu=function(t){var e={word:t.word,rule:t.rule},i=t.listener;return!r.isInsideApp||(r.addWordMenu(e,{onSuccess:i.onSuccess}),!0)},s.prototype.addShareMenu=function(t){var e={title:t.title,content:t.content,link:t.link,imgLink:t.imgLink};return!r.isInsideApp||void r.addShareMenu(e)},s.prototype.deleteMenu=function(t){return!!r.isInsideApp&&void r.deleteMenu(t)},s.prototype.setTapHead=function(t){var e={items:t.items,styles:t.styles};return!r.isInsideApp||(r.setTapHead(e),void console.log("set tap head."))},s.prototype.setListHead=function(t){var e={items:t.items,styles:t.styles};return!r.isInsideApp||(r.setListHead(e),void console.log("set tap head."))},s.prototype.setDocTitle=function(t){var e={};return"string"==typeof t?e.title=t:e.title=t.title,!r.isInsideApp||void r.setDocTitle(e)},s.directive("linkurl",{priority:g-2,bind:function(){var t=this.vm;if(!t.$route)return void warn$1("v-link can only be used inside a router-enabled app.");this.router=t.$route.router,this.unwatch=t.$watch("$route",p(this.onRouteUpdate,this));var e=this.el.getAttribute(w);e&&(this.el.removeAttribute(w),this.activeIds=e.split(",")),"A"===this.el.tagName&&"_blank"===this.el.getAttribute("target")||(this.handler=p(this.onClick,this),this.el.addEventListener("click",this.handler))},update:function(t){this.target=t,h(t)&&(this.append=t.append,this.exact=t.exact,this.prevActiveClass=this.activeClass,this.activeClass=t.activeClass),this.onRouteUpdate(this.vm.$route)},onClick:function(t){if(!(t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented||0!==t.button)){var o=this.target;if(o){if(r.isInsideApp){var n=i(o);return void r.openNewPage({title:o.title,linkUrl:n})}t.preventDefault(),o.url&&(window.location.href=o.url),this.router.go(o)}else{for(var s=t.target;"A"!==s.tagName&&s!==this.el;)s=s.parentNode;if("A"===s.tagName&&e(s)){t.preventDefault();var a=s.pathname;this.router.history.root&&(a=a.replace(this.router.history.rootRE,"")),this.router.go({path:a,replace:o&&o.replace,append:o&&o.append})}}}},onRouteUpdate:function(t){var e=this.router.stringifyPath(this.target);this.path!==e&&(this.path=e,this.updateActiveMatch()),this.activeIds?this.vm.$emit(w,this,t.path):this.updateClasses(t.path,this.el)},updateActiveMatch:function(){this.activeRE=this.path&&!this.exact?new RegExp("^"+this.path.replace(/\/$/,"").replace(c,"").replace(l,"\\$&")+"(\\/|$)"):null},updateHref:function(){if("A"===this.el.tagName){var t=this.path,e=this.router,i="/"===t.charAt(0),o=t&&("hash"===e.mode||i)?e.history.formatPath(t,this.append):t;o?this.el.href=o:this.el.removeAttribute("href")}},updateClasses:function(t,e){var i=this.activeClass||this.router._linkActiveClass;this.prevActiveClass&&this.prevActiveClass!==i&&o(e,this.prevActiveClass,f);var n=this.path.replace(c,"");t=t.replace(c,""),this.exact?n===t||"/"!==n.charAt(n.length-1)&&n===t.replace(u,"")?o(e,i,v):o(e,i,f):this.activeRE&&this.activeRE.test(t)?o(e,i,v):o(e,i,f)},unbind:function(){this.el.removeEventListener("click",this.handler),this.unwatch&&this.unwatch()}})},"object"==typeof exports?module.exports=s:"function"==typeof define&&define.amd?define([],function(){return s}):window.Vue&&(window.vueJsbridge=s,Vue.use(s))}}();